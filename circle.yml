machine:
  environment:
    TERM: dumb
  timezone:
    Europe/Paris
  hosts:
    ## CircleCI AWS SecurityGroup Access
    nexus.viadeobackoffice.com: 10.69.181.179
  java:
    version: oraclejdk8

dependencies:
  cache_directories:
    - "~/.gradle"

  override:
    - ./gradlew assemble --parallel-threads=2:
        timeout: 300

test:
  override:
    - ./gradlew check:
        parallel: true

deployment:
  nexus:
    branch: develop
    owner: viadeo
    commands:
      - ./gradlew build uploadArchives --parallel-threads=2
